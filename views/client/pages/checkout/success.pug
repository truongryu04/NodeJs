extends ../../layouts/default.pug
include ../../mixins/box-head.pug
include ../../mixins/product-item.pug
include ../../mixins/alert.pug
block main
    +alert-success(2000)

    .container.my-3
        .row
            .col-12 
                +box-head("Đặt hàng thành công")
        .row
            .col-12 
                div(class="alert alert-success p-4")
                    h4 Cảm ơn bạn đã đặt hàng!
                    p Đơn hàng của bạn đã được tiếp nhận và đang được xử lý.
                    p Mã đơn hàng của bạn là: 
                        strong #{order._id}
                    p Chúng tôi sẽ liên hệ với bạn sớm nhất có thể qua số điện thoại hoặc email bạn đã cung cấp.
                    p Nếu bạn có bất kỳ câu hỏi nào, vui lòng liên hệ với chúng tôi qua email
        if(order)
            .row 
                .col-12 
                    h4 Thông tin cá nhân 
                    table(class="table table-bordered")
                        tbody
                            tr 
                                th Họ tên 
                                td #{order.userInfor.fullName}
                            tr 
                                th Số điện thoại 
                                td #{order.userInfor.phone}
                            tr 
                                th Địa chỉ 
                                td #{order.userInfor.address}
        .row 
            .col-12 
                h4 Chi tiết đơn hàng 
                table(class = "table table-bordered")
                    thead 
                        tr 
                            th STT
                            th Ảnh
                            th Tên sản phẩm 
                            th Giá 
                            th Số lượng 
                            th Tổng tiền 
                    tbody
                        if(order && order.products.length>0)
                            each item,index in order.products
                                tr 
                                    td #{index+1}
                                    td 
                                        img(src=item.productInfor.thumbnail,alt=item.productInfor.title width="80px")
                                    td #{item.productInfor.title}
                                    td #{item.newprice}$
                                    td #{item.quantity}
                                    td #{item.totalPrice}$
                    
                        else 
                            tr 
                                td(
                                    colspan="5"
                                    class="text-center"
                                ) Không có sản phẩm nào trong đơn hàng
                if(order.products.length>0)
                    h3(class="text-end mt-3") Tổng đơn hàng : #{order.totalPrice}$